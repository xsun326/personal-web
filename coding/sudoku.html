<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Â· 9x9</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: #f7f2e9;
            color: #1e293b;
            min-height: 100vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .bg-stickers {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .bg-stickers i {
            position: absolute;
            color: rgba(100, 150, 200, 0.15);
            font-size: 6rem;
            transform: rotate(0deg);
            animation: float 20s infinite ease-in-out;
        }
        .bg-stickers i:nth-child(1) { top: 5%; left: 2%; font-size: 8rem; transform: rotate(-15deg); }
        .bg-stickers i:nth-child(2) { bottom: 15%; right: 3%; font-size: 7rem; transform: rotate(10deg); color: rgba(220, 120, 100, 0.1); }
        .bg-stickers i:nth-child(3) { top: 20%; right: 15%; font-size: 5rem; transform: rotate(25deg); color: rgba(80, 180, 120, 0.12); }
        .bg-stickers i:nth-child(4) { bottom: 30%; left: 10%; font-size: 9rem; transform: rotate(-5deg); color: rgba(200, 180, 60, 0.1); }
        .bg-stickers i:nth-child(5) { top: 60%; left: 25%; font-size: 4rem; transform: rotate(45deg); color: rgba(160, 100, 200, 0.1); }
        .bg-stickers i:nth-child(6) { top: 10%; left: 40%; font-size: 6rem; transform: rotate(80deg); color: rgba(70, 130, 200, 0.1); }
        .bg-stickers i:nth-child(7) { bottom: 5%; right: 25%; font-size: 5.5rem; transform: rotate(-20deg); color: rgba(255, 160, 0, 0.1); }
        .bg-stickers i:nth-child(8) { top: 45%; right: 5%; font-size: 7rem; transform: rotate(60deg); color: rgba(40, 180, 160, 0.1); }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(var(--rot, 0deg)); }
            50% { transform: translateY(-15px) rotate(var(--rot, 0deg)); }
        }
        .game-card {
            background: #fffcf0;
            border: 4px solid #ffb882;
            border-radius: 40px 20px 40px 20px;
            padding: 2rem 2rem;
            box-shadow: 8px 8px 0 #a87b5a, 12px 12px 20px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
            max-width: 650px;
            width: 100%;
            transform: rotate(-0.5deg);
        }
        .game-card:hover {
            transform: rotate(0deg);
        }
        .game-card::before {
            content: "ðŸ“Œ";
            position: absolute;
            top: -12px;
            left: 30px;
            font-size: 2rem;
            transform: rotate(-15deg);
            filter: drop-shadow(2px 4px 2px rgba(0,0,0,0.2));
        }
        h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.8rem;
            color: #1f4a64;
            text-align: center;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 0 #ffaa70;
            word-break: break-word;
        }
        .info-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fef7e6;
            border: 3px solid #fca975;
            border-radius: 30px 10px 30px 10px;
            padding: 0.8rem 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 5px 5px 0 #b0724a;
        }
        .difficulty select {
            background: #e2d5c0;
            border: 2px solid #ba9f8b;
            color: #2f4858;
            font-size: 1rem;
            padding: 0.3rem 1rem;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 3px 3px 0 #866653;
        }
        .buttons {
            display: flex;
            gap: 10px;
        }
        .buttons button {
            background: #e2d5c0;
            border: 2px solid #ba9f8b;
            color: #2f4858;
            font-size: 1rem;
            padding: 0.3rem 1rem;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 3px 3px 0 #866653;
            transition: 0.1s;
        }
        .buttons button:hover {
            transform: translate(2px, 2px);
            box-shadow: 1px 1px 0 #866653;
        }
        .sudoku-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 0;
            background: transparent;
            border: 4px solid #fca975;
            border-radius: 20px;
            box-shadow: 5px 5px 0 #b0724a;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        .cell {
            aspect-ratio: 1 / 1;
            background: #fef7e6;
            border: 1px solid #bbada0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: 600;
            color: #1f4a64;
            cursor: pointer;
            user-select: none;
        }
        .cell.fixed {
            background: #e2d5c0;
            color: #2d3047;
            font-weight: 700;
        }
        .cell.selected {
            background: #ffe5b4;
            border: 2px solid #ff8a5c;
        }
        .cell.conflict {
            background: #f8d7da;
            color: #721c24;
        }
        .cell:nth-child(9n+3),
        .cell:nth-child(9n+6) {
            border-right-width: 3px;
            border-right-color: #8b5a2b;
        }
        .cell:nth-child(n+19):nth-child(-n+27),
        .cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom-width: 3px;
            border-bottom-color: #8b5a2b;
        }
        .back-link {
            display: block;
            text-align: center;
            margin-top: 1.5rem;
            color: #1e4158;
            text-decoration: none;
            font-weight: bold;
            background: #ffdbb5;
            border: 3px solid #9b7b62;
            padding: 0.7rem 1rem;
            border-radius: 40px;
            box-shadow: 5px 5px 0 #6d5c4b;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            transition: 0.1s;
        }
        .back-link:hover {
            transform: translate(3px, 3px);
            box-shadow: 2px 2px 0 #6d5c4b;
            background: #ffeac5;
        }
        @media (max-width: 600px) {
            .game-card { padding: 1.5rem; }
            h1 { font-size: 1.2rem; }
            .cell { font-size: 1rem; }
        }
    </style>
</head>
<body>
    <div class="bg-stickers">
        <i class="fas fa-gamepad"></i>
        <i class="fas fa-keyboard"></i>
        <i class="fas fa-computer"></i>
        <i class="fas fa-headphones"></i>
        <i class="fas fa-dice-d6"></i>
        <i class="fas fa-joystick"></i>
        <i class="fas fa-puzzle-piece"></i>
        <i class="fas fa-crown"></i>
    </div>

    <div class="game-card">
        <h1>SUDOKU</h1>
        <div class="info-panel">
            <div class="difficulty">
                <select id="difficulty">
                    <option value="easy">Easy</option>
                    <option value="medium" selected>Medium</option>
                    <option value="hard">Hard</option>
                </select>
            </div>
            <div class="buttons">
                <button id="new-game"><i class="fas fa-redo-alt"></i> New</button>
                <button id="reset"><i class="fas fa-undo-alt"></i> Reset</button>
                <button id="check"><i class="fas fa-check"></i> Check</button>
            </div>
        </div>

        <div class="sudoku-grid" id="sudoku-grid"></div>

        <a href="game.html" class="back-link"><i class="fas fa-arrow-left"></i> back to Game Stickerbook</a>
    </div>

    <script>
        const puzzles = {
            easy: [
                [5,3,0,0,7,0,0,0,0],
                [6,0,0,1,9,5,0,0,0],
                [0,9,8,0,0,0,0,6,0],
                [8,0,0,0,6,0,0,0,3],
                [4,0,0,8,0,3,0,0,1],
                [7,0,0,0,2,0,0,0,6],
                [0,6,0,0,0,0,2,8,0],
                [0,0,0,4,1,9,0,0,5],
                [0,0,0,0,8,0,0,7,9]
            ],
            medium: [
                [0,0,0,2,6,0,7,0,1],
                [6,8,0,0,7,0,0,9,0],
                [0,0,0,0,0,3,0,0,4],
                [3,7,0,0,0,0,6,0,0],
                [0,0,5,4,0,9,8,0,0],
                [0,0,8,0,0,0,0,1,3],
                [9,0,0,5,0,0,0,0,0],
                [0,6,0,0,1,0,0,4,7],
                [2,0,1,0,9,8,0,0,0]
            ],
            hard: [
                [0,0,6,0,0,0,2,0,0],
                [0,9,0,4,7,0,0,6,0],
                [4,0,0,0,0,3,8,0,1],
                [0,5,0,0,0,9,0,2,0],
                [0,0,0,0,0,0,0,0,0],
                [0,2,0,7,0,0,0,5,0],
                [1,0,7,5,0,0,0,0,6],
                [0,3,0,0,4,6,0,1,0],
                [0,0,9,0,0,0,7,0,0]
            ]
        };

        let currentPuzzle = [];
        let board = [];
        let fixedMask = [];
        let selectedRow = -1, selectedCol = -1;
        let conflicts = [];

        const gridEl = document.getElementById('sudoku-grid');
        const difficultySelect = document.getElementById('difficulty');
        const newGameBtn = document.getElementById('new-game');
        const resetBtn = document.getElementById('reset');
        const checkBtn = document.getElementById('check');

        function loadPuzzle(level) {
            const puzzle = puzzles[level];
            currentPuzzle = puzzle.map(row => [...row]);
            board = puzzle.map(row => [...row]);
            fixedMask = puzzle.map(row => row.map(val => val !== 0));
            conflicts = Array(9).fill().map(() => Array(9).fill(false));
            selectedRow = -1;
        }

        function checkConflicts() {
            conflicts = Array(9).fill().map(() => Array(9).fill(false));
            for (let r = 0; r < 9; r++) {
                for (let c = 0; c < 9; c++) {
                    const val = board[r][c];
                    if (val === 0) continue;
                    for (let cc = 0; cc < 9; cc++) {
                        if (cc !== c && board[r][cc] === val) {
                            conflicts[r][c] = true;
                            conflicts[r][cc] = true;
                        }
                    }
                    for (let rr = 0; rr < 9; rr++) {
                        if (rr !== r && board[rr][c] === val) {
                            conflicts[r][c] = true;
                            conflicts[rr][c] = true;
                        }
                    }
                    const startRow = Math.floor(r / 3) * 3;
                    const startCol = Math.floor(c / 3) * 3;
                    for (let rr = startRow; rr < startRow + 3; rr++) {
                        for (let cc = startCol; cc < startCol + 3; cc++) {
                            if ((rr !== r || cc !== c) && board[rr][cc] === val) {
                                conflicts[r][c] = true;
                                conflicts[rr][cc] = true;
                            }
                        }
                    }
                }
            }
        }

        function render() {
            gridEl.innerHTML = '';
            for (let r = 0; r < 9; r++) {
                for (let c = 0; c < 9; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    if (fixedMask[r][c]) cell.classList.add('fixed');
                    if (selectedRow === r && selectedCol === c) cell.classList.add('selected');
                    if (conflicts[r][c]) cell.classList.add('conflict');
                    cell.textContent = board[r][c] !== 0 ? board[r][c] : '';
                    cell.dataset.row = r;
                    cell.dataset.col = c;
                    gridEl.appendChild(cell);
                }
            }
        }

        function setCell(row, col, value) {
            if (fixedMask[row][col]) return;
            if (value >= 1 && value <= 9) {
                board[row][col] = value;
            } else {
                board[row][col] = 0;
            }
            checkConflicts();
            render();
        }

        function resetBoard() {
            board = currentPuzzle.map(row => [...row]);
            conflicts = Array(9).fill().map(() => Array(9).fill(false));
            selectedRow = -1;
            render();
        }

        function newGame() {
            const level = difficultySelect.value;
            loadPuzzle(level);
            render();
        }

        function checkWin() {
            checkConflicts();
            let hasEmpty = false;
            for (let r = 0; r < 9; r++) {
                for (let c = 0; c < 9; c++) {
                    if (board[r][c] === 0) hasEmpty = true;
                }
            }
            if (!hasEmpty && !conflicts.some(row => row.some(val => val))) {
                alert("ðŸŽ‰ Congratulations! You solved it!");
            } else {
                alert("Not yet solved. Keep trying!");
            }
            render();
        }

        gridEl.addEventListener('click', (e) => {
            const cell = e.target.closest('.cell');
            if (!cell) return;
            const row = parseInt(cell.dataset.row);
            const col = parseInt(cell.dataset.col);
            if (selectedRow === row && selectedCol === col) {
                selectedRow = -1;
            } else {
                selectedRow = row;
                selectedCol = col;
            }
            render();
        });

        document.addEventListener('keydown', (e) => {
            if (selectedRow === -1 || selectedCol === -1) return;
            const key = e.key;
            if (key >= '1' && key <= '9') {
                setCell(selectedRow, selectedCol, parseInt(key));
            } else if (key === 'Backspace' || key === 'Delete' || key === '0') {
                setCell(selectedRow, selectedCol, 0);
            }
        });

        resetBtn.addEventListener('click', resetBoard);
        newGameBtn.addEventListener('click', newGame);
        checkBtn.addEventListener('click', checkWin);

        loadPuzzle('medium');
        render();
    </script>
</body>
</html>